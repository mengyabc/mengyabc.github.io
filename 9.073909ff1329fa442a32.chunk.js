(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"728723d313ad4a1684ea":function(e,t,i){"use strict";i.r(t);var a,n=i("8af190b70a6bc55c6f1b"),o=i.n(n),s=i("d7dd51e1bf6bfc2c9c3d"),r=i("ab4cb61bcb2dc161defb"),c=i("e95a63b25fb92ed15721"),l=i("a1964c7af6c55ffa559d"),d=i.n(l),f=i("4cad7676f6ad23a52c95"),p=i("d95b0cf107403b178365"),u=i("adc20f99e57c573c589c"),m=i("491cc2e27aa2b4221847"),h=i("813e0cc30ffbfa2fd57f"),b=i("f9f7134368a214ede562"),y=i("6938d226fd372a75cbf9"),g=(i("6b0cd370e854fbdb6989"),i("ef58856f4f875bd36582")),v=i.n(g);function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,i,n){a||(a="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);else t||(t=o||{});if(1===s)t.children=n;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:a,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function A(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x,N=w("h5",{className:"text-uppercase mb-0"},void 0,"Countdown"),j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,k(t).apply(this,arguments))}var i,a,n;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o.a.PureComponent),i=t,(a=[{key:"render",value:function(){var e=this.props,t=e.classes,i=e.day,a=e.hour,n=e.min,o=e.sec;return w("div",{className:"p-3 d-flex align-items-center justify-content-between bg-secondary"},void 0,w("div",{className:"mr-2"},void 0,w(v.a,{className:"".concat(t.icon)},void 0,"access_time")),w("div",{className:"mr-4"},void 0,N,w("h6",{className:"text-uppercase ".concat(t.subtitle)},void 0,"to match start")),w("div",{className:"d-flex"},void 0,w("div",{className:"d-flex flex-column ".concat(t.countCol)},void 0,w("h4",{className:"mb-0 d-inline-block mr-1"},void 0,i,"\xa0:"),w("h6",{className:"".concat(t.timeTag," d-inline-block")},void 0,"DAY")),w("div",{className:"d-flex flex-column ml-2 ".concat(t.countCol)},void 0,w("h4",{className:"mb-0 d-inline-block mr-1"},void 0,a,"\xa0:"),w("h6",{className:"".concat(t.timeTag," d-inline-block")},void 0,"HOUR")),w("div",{className:"d-flex flex-column ml-2 ".concat(t.countCol)},void 0,w("h4",{className:"mb-0 d-inline-block mr-1"},void 0,n,"\xa0:"),w("h6",{className:"".concat(t.timeTag," d-inline-block")},void 0,"MIN")),w("div",{className:"d-flex flex-column ml-2 ".concat(t.countCol)},void 0,w("h4",{className:"mb-0 d-inline-block mr-1"},void 0,o),w("h6",{className:"".concat(t.timeTag," d-inline-block")},void 0,"SEC"))))}}])&&A(i.prototype,a),n&&A(i,n),t}(),M=Object(y.withStyles)({icon:{height:"2.5rem",width:"2.5rem","font-size":"2.5rem",opacity:"0.7"},subtitle:{"font-size":"0.8rem","letter-spacing":"1.5px"},timeTag:{"font-size":"0.625rem"},countCol:{width:"40px"}})(j),_=i("041021065ead6515c7e1"),C=i("813abfae34ccd3916757");function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,i,a){x||(x="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&n)for(var s in n)void 0===t[s]&&(t[s]=n[s]);else t||(t=n||{});if(1===o)t.children=a;else if(o>1){for(var r=new Array(o),c=0;c<o;c++)r[c]=arguments[c+3];t.children=r}return{$$typeof:x,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}function E(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var U=P(_.a,{}),H=P("div",{className:"pt-2 text-center border-bottom"},void 0,P("h4",{},void 0,"WHOS YOUR TIP ?")),z=function(e){function t(e){var i,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=B(t).call(this,e),i=!n||"object"!==I(n)&&"function"!==typeof n?R(a):n,$(R(R(i)),"getDuration",function(e){var t=Math.floor(f.a.duration(e).asDays());e-=24*t*60*60*1e3;var i=Math.floor(f.a.duration(e).asHours());e-=60*i*60*1e3;var a=Math.floor(f.a.duration(e).asMinutes());return e-=60*a*1e3,{diffDays:t,diffHours:i,diffMins:a,diffSec:Math.floor(f.a.duration(e).asSeconds())}}),$(R(R(i)),"handleTippingChange",function(e){i.setState({tipping:e.target.value})}),$(R(R(i)),"selectTeam",function(e){var t=d()(i.state,{selectedTeam:{$set:e},showSelectA:{$set:e.id_team==i.state.teamA.id_team},showSelectB:{$set:e.id_team==i.state.teamB.id_team}});i.setState(t)}),$(R(R(i)),"lockIn",function(e){e.preventDefault();var t=i.state,a=t.gameId,n=t.organisationId,o=t.selectedTeam,s=t.tipping;o&&s?(i.setState({lock:!0,loading:!0}),i.props.postTipping({gameId:a,organisationId:n||1,teamId:o.id_team,tip:s,token:document.cookie.split(";").filter(function(e){return 0==e.trim().indexOf("token=")})[0].slice(7,-1)})):(i.setState({alert:!0,alertType:"error",alertMessage:"Please select/input your tipping details."}),i.dismissAlert=setTimeout(function(){i.setState({alert:!1})},1e3))}),i.state={gameId:null,organisationId:null,startTime:"",endTime:"",tipping:"",selectedTeam:"",showSelectA:!1,showSelectB:!1,lock:!1,teamA:{id:1,name:"brisbane"},teamB:{id:2,name:"adelaide"},loading:!1,alert:!1,alertMessage:!1,alertType:!1,redirectToGame:!1,diffDays:0,diffHours:0,diffMins:0,diffSec:0},i}var a,n,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,o.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.gameId,i=e.organisationId,a=document.cookie.split(";").filter(function(e){return 0==e.trim().indexOf("token=")})[0].slice(7,-1);this.props.getGameAndTeams({gameId:t,token:a}),this.setState({gameId:t,organisationId:i})}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.tipping!==e.tipping)if(200==this.props.tipping.status){var i=d()(this.state,{startTime:{$set:this.props.tipping.game.datetime_start},endTime:{$set:this.props.tipping.game.datetime_end},teamA:{$set:this.props.tipping.teams[0]},teamB:{$set:this.props.tipping.teams[1]}});if(this.setState(i),!this.countdown){var a=Object(f.a)(this.props.tipping.game.datetime_start).diff(new Date,"milliseconds",!0);this.countdown=setInterval(function(){if(a>0){var e=t.getDuration(a),i=e.diffDays,n=e.diffHours,o=e.diffMins,s=e.diffSec;a-=1e3,t.setState({diffDays:i,diffHours:n,diffMins:o,diffSec:s})}else clearInterval(t.countdown)},1e3)}}else this.setState({loading:!1,alert:!0,alertType:"error",alertMessage:"Fail to load. Please try again."}),this.dismissAlert=setTimeout(function(){t.setState({alert:!1})},1e3);this.props.tipping!==e.tipping&&(200===this.props.tipping.postStatus&&(this.setState({loading:!1,alert:!0,alertType:"success",alertMessage:"Tip added successfully."}),this.dismissAlert=setTimeout(function(){t.setState({alert:!1,redirectToGame:!0})},1e3)),200!==this.props.tipping.postStatus&&!0===this.state.loading&&(this.setState({loading:!1,alert:!0,alertType:"error",alertMessage:"Fail to tip. Please try again."}),this.dismissAlert=setTimeout(function(){t.setState({alert:!1})},1e3)))}},{key:"componentWillUnmount",value:function(){clearInterval(this.countdown),clearTimeout(this.dismissAlert)}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.redirectToGame?P(c.Redirect,{to:"/group-game/".concat(this.state.organisationId)}):P("div",{},void 0,this.state.loading?U:"",P(C.a,{alert:this.state.alert,type:this.state.alertType,message:this.state.alertMessage}),P(M,{day:this.state.diffDays,hour:this.state.diffHours,min:this.state.diffMins,sec:this.state.diffSec}),H,P("div",{className:"pt-1 text-center border-bottom"},void 0,P("h6",{className:"text-uppercase my-2 ".concat(t.time)},void 0,Object(f.a)(this.state.startTime).format("LLLL")),P("h5",{className:"text-uppercase my-2 ".concat(t.title)},void 0,"SELECT A TEAM"),P("div",{className:"d-flex px-4 justify-content-between"},void 0,P("div",{className:"p-3 m-2 rounded-circle border-success ".concat(t.image," ").concat(this.state.showSelectA?t.circle:""),onClick:function(){return e.selectTeam(e.state.teamA)}},void 0,P("img",{src:i("f3c56965267c9388049e"),width:"64"})),P("div",{className:"p-2"},void 0,P("h5",{className:"text-uppercase my-3 pt-3 ".concat(t.title)},void 0,"VS")),P("div",{className:"p-3 m-2 rounded-circle border-success ".concat(t.image," ").concat(this.state.showSelectB?t.circle:""),onClick:function(){return e.selectTeam(e.state.teamB)}},void 0,P("img",{src:i("f52263a422c7832ee3c1"),width:"64"})))),P("div",{className:"text-center"},void 0,P("h5",{className:"text-uppercase mt-2 text-success ".concat(this.state.showSelectB||this.state.showSelectA?"d-block":"d-none"),style:{fontSize:"1.1rem"}},void 0,this.state.selectedTeam.name,", WITH A TOTAL SCORE OF ",this.state.tipping),P("input",{id:"tipping",placeholder:"tipping",value:this.state.tipping,onChange:this.handleTippingChange,type:"number",disabled:!!this.state.lock,style:{fontSize:"2rem",width:"10rem"},className:"border py-2 px-3 text-center mt-4 mb-4"}),P("button",{className:"btn btn-lg d-block mx-auto px-4 ".concat(this.state.tipping&&!this.state.lock&&this.state.selectedTeam?"btn-danger":"btn-secondary disabled "),style:{fontSize:"1.25rem",width:"18rem"},onClick:this.lockIn},void 0,"Lock it in")))}}])&&E(a.prototype,n),s&&E(a,s),t}();var G=Object(p.a)({key:"app",reducer:m.b}),J=Object(u.a)({key:"app",saga:b.a}),L=Object(s.connect)(function(e){return{tipping:e.get("app").get("tipping")}},function(e){return{getGameAndTeams:function(t){return e(Object(h.o)(t))},postTipping:function(t){return e(Object(h.t)(t))}}});t.default=Object(r.compose)(G,J,L,Object(y.withStyles)({time:{"font-size":"0.8rem","letter-spacing":"1.1px",color:"var(--darkest-grey)"},title:{"font-size":"1.1rem",color:"var(--darker-grey)"},image:{width:"100px",height:"100px"},circle:{border:"solid 3px"}}))(z)},f3c56965267c9388049e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWAgMAAABBb5lxAAAACVBMVEUAVaaGADdJFlwexdusAAAAMUlEQVRYw+3KMREAIAwEsJfYBX/MqMRCx14vmZMAAMO8jpvTUZqmaZqmaZqmaZq2r31NGPiapP07fAAAAABJRU5ErkJggg=="}}]);